{"failedCount":1,"prefixedPath":"src\/test\/java\/acceptance\/test\/prueba-tecnica.feature","packageQualifiedName":"src.test.java.acceptance.test.prueba-tecnica","loopIndex":-1,"relativePath":"src\/test\/java\/acceptance\/test\/prueba-tecnica.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":93380200,"millis":93.3802,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"configure retry = {count: 3, interval: 3000}"}},{"result":{"nanos":14329500,"millis":14.3295,"status":"passed"},"step":{"comments":["# La clase S3Util se encuentra en un gestor de librerías externo al proyecto","# Imaginemos que esta clase contiene la configuración y conexión de un cliente AWS, además los métodos para subir archivos a buckets S3","# También contiene un método para verificar si un archivo se encuentra dentro de un folder","#    * def S3Manager = Java.type('co.cobre.lib.qa.aws.S3Util')","#    * def S3ManagerInstance = new S3Manager()","#    * def SQSManager = karate.callSingle('..\/acceptance\/test\/instances-sqs.js')"],"background":true,"line":11,"prefix":"*","index":1,"text":"def waitTime = function(seconds) { java.lang.Thread.sleep(seconds * 1000) }"}},{"result":{"nanos":40768100,"millis":40.7681,"status":"passed"},"step":{"comments":["# La clase FileUtils se encuentra en un gestor de librerías externo al proyecto","# Imaginemos que esta clase contiene métodos para tomar un archivo, renombrarlo y copiarlo en otra ruta","#    * def FileUtils = Java.type('co.cobre.lib.qa.util.FileUtils')"],"background":true,"line":15,"prefix":"*","index":2,"text":"def CommonUtils = Java.type('co.cobre.lib.qa.util.CommonUtils')"}},{"result":{"nanos":2911700,"millis":2.9117,"status":"passed"},"step":{"background":true,"line":16,"prefix":"*","index":3,"text":"def CommonFuntion = Java.type('co.cobre.lib.qa.util.CommonFuntion')"}},{"result":{"nanos":591088800,"millis":591.0888,"status":"passed"},"step":{"comments":["# --------------------------------------------------------------- #"],"line":23,"prefix":"*","index":0,"text":"def noveltyUuid = CommonUtils.generateUUID()"}},{"result":{"nanos":14253200,"millis":14.2532,"status":"passed"},"step":{"line":24,"prefix":"*","index":1,"text":"print \"El uuid de la novedad es: \" + noveltyUuid"},"stepLog":"19:02:22.945 [print] El uuid de la novedad es: a9808e57-6b00-4c45-88f6-3e7e7c473123 \n"},{"result":{"nanos":698900,"millis":0.6989,"status":"passed"},"step":{"line":25,"prefix":"*","index":2,"text":"def fullFileName = noveltyUuid+fileExtension"}},{"result":{"nanos":775800,"millis":0.7758,"status":"passed"},"step":{"comments":["# --------------------------------------------------------------- #","#    * def renameFile = FileUtils.renameFile(currentFilePath, currentFileName, newPathNewFile, noveltyUuid, fn.fileExtension)","#    * match renameFile == true","# --------------------------------------------------------------- #"],"line":33,"prefix":"*","index":3,"text":"print \"El bucket es: \" + bucketName"},"stepLog":"19:02:22.945 [print] El bucket es: test-automation-qa \n"},{"result":{"nanos":713900,"millis":0.7139,"status":"passed"},"step":{"line":34,"prefix":"*","index":4,"text":"print \"El folder  es: \" + folderRecaudoFiles"},"stepLog":"19:02:22.945 [print] El folder  es: files-to-cash-in \n"},{"result":{"nanos":691100,"millis":0.6911,"status":"passed"},"step":{"comments":["#    * S3ManagerInstance.uploadFileToBucket(karate.bucketName, fn.folderRecaudoFiles, fullFileName, newPathNewFile)","#    * waitTime(3)","# --------------------------------------------------------------- #","#    * def fileExist = S3ManagerInstance.doesFileExist(bucketName, folderRecaudoFiles, fullFileName)","#    * print \"La existencia del archivo es: \" + fileExist","#    * match fileExist == true","# --------------------------------------------------------------- #","#    * def variableMapToReplaceInQueueMessageBody = createMyObject(fullFileName, <clientCode>, bucketName)","#    * print \"el valor es: \" + variableMapToReplaceInQueueMessageBody","#    * SQSManager.sendMessageToQueue('<jsonFileSqsEvents>', 'testing-recaudo-qa.fifo', variableMapToReplaceInQueueMessageBody, '<pathJsonFileSqsEvents>')","#    * waitTime(8)","# --------------------------------------------------------------- #","# Uso de API REST para obtener información de las novedades"],"line":53,"prefix":"Given","index":5,"text":"url baseUrl + noveltyUuid"}},{"result":{"nanos":561500,"millis":0.5615,"status":"passed"},"step":{"line":54,"prefix":"And","index":6,"text":"header X-WorkplaceBankCode = 'TEST01'"}},{"result":{"nanos":16600,"millis":0.0166,"status":"passed"},"step":{"line":55,"prefix":"And","index":7,"text":"retry until responseStatus == 200 && response.cashInNovelty.status == status && response.cashInNoveltyDetailsCounters.total == total"}},{"result":{"nanos":356458200,"errorMessage":"http call failed after 346 milliseconds for url: https:\/\/test-container-qa.prueba.co\/v1\/entity\/novelties\/a9808e57-6b00-4c45-88f6-3e7e7c473123\nsrc\/test\/java\/acceptance\/test\/prueba-tecnica.feature:56","millis":356.4582,"status":"failed"},"step":{"line":56,"prefix":"When","index":8,"text":"method get"},"stepLog":"19:02:23.228 request:\n1 > GET https:\/\/test-container-qa.prueba.co\/v1\/entity\/novelties\/a9808e57-6b00-4c45-88f6-3e7e7c473123\n1 > X-WorkplaceBankCode: TEST01\n1 > Host: test-container-qa.prueba.co\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/1.8.0_322)\n1 > Accept-Encoding: gzip,deflate\n\n\n19:02:23.306 java.net.UnknownHostException: test-container-qa.prueba.co, http call failed after 346 milliseconds for url: https:\/\/test-container-qa.prueba.co\/v1\/entity\/novelties\/a9808e57-6b00-4c45-88f6-3e7e7c473123\n19:02:23.306 src\/test\/java\/acceptance\/test\/prueba-tecnica.feature:56\nWhen method get\nhttp call failed after 346 milliseconds for url: https:\/\/test-container-qa.prueba.co\/v1\/entity\/novelties\/a9808e57-6b00-4c45-88f6-3e7e7c473123\nsrc\/test\/java\/acceptance\/test\/prueba-tecnica.feature:56\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":57,"prefix":"Then","index":9,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":58,"prefix":"*","index":10,"text":"def totalAmount = response.cashInNovelty.totalAmount"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":59,"prefix":"*","index":11,"text":"def status = response.cashInNovelty.status"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":60,"prefix":"*","index":12,"text":"def totalNovelties = response.cashInNoveltyDetailsCounters.total"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":61,"prefix":"*","index":13,"text":"def validationError = response.cashInNoveltyDetailsCounters.validationError"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":62,"prefix":"*","index":14,"text":"def created = response.cashInNoveltyDetailsCounters.created#    * match totalAmount == '<>'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":64,"prefix":"*","index":15,"text":"def validateResult = CommonFuntion.validateNovelty(response, totalAmount, status, totalNovelties, validationError, created)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":66,"prefix":"*","index":16,"text":"match getNovelty.status == 'VALIDATED'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":67,"prefix":"*","index":17,"text":"match getNovelty.totalNovelties == '3'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":68,"prefix":"*","index":18,"text":"match getNovelty.validationError == '0'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":69,"prefix":"*","index":19,"text":"match getNovelty.created == '3'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":70,"prefix":"*","index":20,"text":"waitTime(3)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"comments":["# --------------------------------------------------------------- #","# Uso de API REST para obtener información de las novelty-details"],"line":74,"prefix":"*","index":21,"text":"def dataWithExpectedInformation = karate.read(\"classpath:acceptance\/test\/\" + 'respuestaEsperadaDatosCorrectos.json')"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":75,"prefix":"*","index":22,"text":"def pageInt = parseInt('1')"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":76,"prefix":"*","index":23,"text":"def sizeInt = parseInt('3')"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":77,"prefix":"Given","index":24,"text":"url 'https:\/\/test-container-qa.prueba.co\/v1\/entity\/novelties\/'+noveltyUuid+''+'\/novelty-details'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":78,"prefix":"And","index":25,"text":"header X-WorkplaceBankCode = 'TEST01'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":79,"prefix":"And","index":26,"text":"params {page: '0', size: '100'}"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":80,"prefix":"And","index":27,"text":"retry until responseStatus == 200 && response.content != []"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":81,"prefix":"When","index":28,"text":"method get"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":82,"prefix":"Then","index":29,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":83,"prefix":"*","index":30,"text":"def content = response.content"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":84,"prefix":"*","index":31,"text":"match getNoveltyDetails.content contains deep dataWithExpectedInformation"}}],"line":88,"description":"","durationMillis":1116.6475,"failed":true,"error":"http call failed after 346 milliseconds for url: https:\/\/test-container-qa.prueba.co\/v1\/entity\/novelties\/a9808e57-6b00-4c45-88f6-3e7e7c473123\nsrc\/test\/java\/acceptance\/test\/prueba-tecnica.feature:56","tags":["regression"],"executorName":"main","name":"Dado que se carga un archivo de recaudo con datos correctamente con usuarios que recibirán un link de pago, al procesarse el archivo se persisten en BD los recaudo creados exitosamente","startTime":1710979342019,"refId":"[1.1:88]","endTime":1710979343306,"exampleData":{"clientCode":"TEST01","pathJsonFileSqsEvents":"src\/test\/java\/acceptance\/test\/","jsonFileSqsEvents":"queueEvent.json","currentFilePath":"src\/test\/java\/acceptance\/test\/","currentFileName":"recaudoTemplateDatosCorrectos.csv","newPathNewFile":"src\/test\/resources\/testFilesToUse\/","pathJsonDataWithExpectedInformation":"src\/test\/java\/acceptance\/test\/","jsonDataWithExpectedInformation":"respuestaEsperadaDatosCorrectos.json","noveltyStatus":"VALIDATED","registerTotal":"3","validationErrorNumber":"'0'","createdNumber":"'3'","page":"1","size":"3"},"exampleIndex":0}],"callDepth":0,"name":"sample karate test script","description":"","resultDate":"2024-03-20 07:02:23 PM","durationMillis":1116.6475,"passedCount":0}